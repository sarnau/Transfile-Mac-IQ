/*** *	einige kleiner Routinen ***/#include "GlobalDefines.h"#include "Utilities.h"JumpBuffer			gJumpBuffer;void		Pause(long time){	UInt32	l;	Delay(time, &l);}/*** *	Handle sperren, aber vorher ans Heap-Ende verschieben ***/char	HLockH(REG Handle theHandle){REG UCHAR	hstate;	hstate = HGetState(theHandle);	// aktuellen Status der Handle holen	if (!BTstQ(hstate,7))			// Block noch nicht gelockt?		HLockHi(theHandle);			// dann nach oben schieben und locken	return(hstate);					// Status der Handle zurŸckgeben}/*** *	zwei Pascal-Strings verketten ***/#if 1void	ConcatPString(REG Str255 d,REG Str255 s){REG short		l;	if ((d[0]+s[0])>255)			// maximale StringlŠnge!		l = 255-d[0];				// nur bis maximal 255 Zeichen auffŸllen	else		l = s[0];					// gesamten String anhŠngen	if (l > 0) {					// Ÿberhaupt was zu kopieren?		BlockMoveData(s+1,d+d[0]+1,l);	// String dranhŠngen		d[0] += l;					// StringlŠnge hochsetzen	}}#elsevoid	ConcatPString(Str255 d,Str255 s){	Strpcat(d,s);}#endif/*** *	Pascal-String auf einen anderen kopieren ***/#if 1void	CopyPString(REG Str255 d,REG Str255 s){	BlockMoveData(s,d,1+(long)s[0]);}#elsevoid	CopyPString(Str255 d,Str255 s){	Strpcpy(d,s);}#endif/*** *	zwei Pascal-Strings auf Gleichheit testen ***/#if 1Boolean	ComparePString(REG Str255 s1,REG Str255 s2){REG	short		i;	if (s1[0] == s2[0]) {			// ist die LŠnge gleich?		i = s1[0];					// LŠnge der Strings		while(i) {			if (s1[i] != s2[i])				return(false);		// String sind ungleich			--i;		}		return(true);				// String sind gleich	} else		return(false);				// ungleiche LŠnge => ungleiche Strings}#elseBoolean	ComparePString(REG Str255 s1,REG Str255 s2){	return(Strpcmp(s1,s2));}#endif/*** *	Byte in ASCII-Hexzeichen wandeln ***/char	hex(REG UWORD i){	i &= 0xF;	i += '0';	if (i>'9') i+= 'A'-'9'-1;	return((char)i);}short		GetHexByte(REG STR cptr){REG	UCHAR	val,chr;REG UWORD	i;	for (val=0,i=0;i<2;i++) {		chr = cptr[i];		if (chr == '=') return(cptr[++i]);		if (chr>'F') chr -= 0x20;		if (chr>'9') chr -= ('A'-'9'-1);		val = (val<<4)+chr-'0';	}	return(val & 0xFF);}