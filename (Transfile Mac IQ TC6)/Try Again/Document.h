#pragma once	// include this header				// only once per source file#ifndef OFFSET#define OFFSET(type, field)		((int) &((type *) 0)->field)#endif#define kInvalVRefNum	-32767	// illegale Volume-RefNum#define	isStationery	11		// Bit 11 in der Finder-Infotypedef struct {	Boolean			fileDirty;		// true: Dokument dirty	Boolean			readOnly;		// true: Dokument read only	Boolean			reallyReadOnly;	// true: Dokument darf nicht verändert werden	short			refNum;			// RefNum der Datei	FSSpec			fss;			// Datei-Parameter	unsigned char	Passwort[32];	// evtl. Passwort} FileRec, *FileRecPtr;// einige kleine Defines zur Erleichterung…#define DOC(funk,param)				DocAktion(OFFSET(DocStruct,funk),(long)param)#define DFUNC(doc,funk,exefunk)		(*doc)->funk = (ProcPtr)exefunk#define AKTDOC						(**gDoc)typedef struct DocStruct {	struct DocStruct	**next;		// Handle auf die nächste Windowstruktur	FileRec				f;			// File-Daten	ProcPtr				activate;	// Dokument wird aktiv	ProcPtr				deactivate;	// Dokument wird inaktiv	ProcPtr				new;		// neues Dokument wurde erzeugt	ProcPtr				open;		// Dokument wird geöffnet	ProcPtr				close;		// schließen	ProcPtr				pack;		// Daten packen	ProcPtr				unpack;		// Daten auspacken	ProcPtr				window;		// Window öffnen	ProcPtr				menuupdate;	// Menüpunkte en- bzw. disablen	ProcPtr				menucmd;	// Menübefehl ausgewählt	ProcPtr				beforerevert;// _direkt_ vor dem Revert (z.B. IRQs stoppen)	ProcPtr				revert;		// Revert wurde angewählt	ProcPtr				save;		// Speichern	ProcPtr				load;		// Speichern	Handle				data;		// Handle auf die Daten zum Dokument	short				id;			// Menü-ID des Dokumentes im Window-Menü} DocStruct, *DocPtr, **DocHandle;extern	DocHandle	gDoc;			// das aktive Dokumentextern	DocHandle	gDocList;		// Handle auf das erste Dokumentextern	SFTypeList	gFileTypes;		// Filetypen für den File-Selectorextern	short		gFileTypesCount;// Anzahl der Filetypen für den FSextern	ProcPtr		gGetFileFilter;	// Filefilter für SFGetFile()void	InitDocument(void);OSErr	DocAktion(short offset,long param);void	SetDoc(REG DocHandle d);void	WindRename(void);WORD	DocMenu(WORD id,REG USTR docname);void	DocMenuName(REG DocHandle d);void	DocMenuUpdate(void);void	ResetDocFloats(DocHandle d);void	SetDocFloats(DocHandle d);OSErr	SetDocName(DocHandle d,Str255 s,Boolean change);OSErr	AppDisposeDocument(REG DocHandle d);Boolean	AppDocumentDirty(DocHandle d,REG short flag);Boolean	AppDocumentFile(DocHandle d);OSErr	AppInitDocument(REG DocHandle d,short m,REG OSErr err);OSErr	AppNewDocument(REG DocHandle *result);OSErr	AppOpenDocument(REG DocHandle *result,FSSpecPtr fileToOpen,char permission);OSErr	AppSaveDocument(REG DocHandle d,short saveMode);void	ConvertOldToNewSFReply(REG SFReply *oldReply,StandardFileReply *newReply);OSErr	CreateOpenFile(REG FSSpec *file,REG short *refNum);short	PasswortDialog(short id);Boolean DisplayGetFile(REG StandardFileReply *reply);Boolean DisplayPutFile(REG StandardFileReply *reply,Boolean pw);OSErr	AppReadDocument(REG DocHandle frHndl);OSErr	AppWriteDocument(REG DocHandle frHndl);OSErr	AppDuplicateDocument(REG DocHandle oldFrHndl,REG DocHandle *newFrHndl);OSErr	AppRevertDocument(REG DocHandle d);