/*** *	MeterWindow ***/#include "MeterWindow.h"long		mWmax;long		mWakt;WindowPtr	mWPtr;Rect		mWItemRect;pascal void		mWindowDraw(DialogPtr d,short item){#define fiveSize 1#define tenSize 3short		i;GrafPtr		savePort;short		type;Handle		h;short		tenStep;short		fiveStep;	mWPtr = d;	if (!d) return;	GetPort(&savePort);	SetPort(d);	GetDItem(d,item,&type,&h,&mWItemRect);	EraseRect(&mWItemRect);	tenStep = mWItemRect.right - mWItemRect.left;	fiveStep = tenStep / 2;	PenSize(1,1);	InsetRect(&mWItemRect,-1,-1);	FrameRect(&mWItemRect);	InsetRect(&mWItemRect,1,1);	MoveTo(mWItemRect.left + fiveStep, mWItemRect.top - 1);	Line(0,fiveSize);	MoveTo(mWItemRect.left + fiveStep, mWItemRect.bottom);	Line(0,-fiveSize);	for(i=1;i<=9;i++) {		MoveTo(mWItemRect.left + (i * tenStep) / 10 - 1, mWItemRect.top - 1);		Line(0,tenSize);		MoveTo(mWItemRect.left + (i * tenStep) / 10 - 1, mWItemRect.bottom);		Line(0,-tenSize);		MoveTo(mWItemRect.left + (i * tenStep) / 10 + fiveStep / 10, mWItemRect.top - 1);		Line(0,fiveSize);		MoveTo(mWItemRect.left + (i * tenStep) / 10 + fiveStep / 10, mWItemRect.bottom);		Line(0,-fiveSize);	}	SetPort(savePort);}void	mWindowUpdate(long curI){GrafPtr		savePort;Rect		mRect = mWItemRect;short		pDone;short		hsize = mRect.right - mRect.left;	mWakt = curI;	if (!mWPtr) return;	GetPort(&savePort);	SetPort(mWPtr);	if (mWmax == 0)	pDone = 0;	else			pDone = (curI * hsize / mWmax);	if (pDone > hsize) pDone = hsize;	mRect.right = mRect.left + pDone;	FillRect(&mRect,gray);	SetPort(savePort);}