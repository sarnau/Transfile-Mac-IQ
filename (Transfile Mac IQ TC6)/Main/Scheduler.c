////	Scheduler.c//#include "GlobalDefines.h"#include "Windows.h"#include "xRsrcDefines.h"#include "Geos.h"#include "Memo.h"#include "Scheduler.h"#include "Calendar.h"#include "Telephone.h"////	Window öffnen//OSErr	OpenSchedWindows(void)		/* Window für Scheduler öffnen */{	REG WindPtr	w1;	w1 = MyOpenWind(FULLER | (1L<<noOrigin),WindSchedule,strScheduler,SCHEDULE);	/* Window mit Slidern */	if(!w1) 		return(memFullErr);				// Fehler beim Öffnen 	MultiOpen(w1,SCHEDULE);	WFUNC(w1,menuupdate,telupdate);		// Darstellung enabeln etc.	return(noErr);						// alles ok!}//// Routine zur Umrechnung einer Menü-Entry-Nummer in einen Language-Code//int		MenuToLanguageCode(int entry){	if(entry==1)				// Persönliches Format		return(2000);	if(entry<(13+LANG_OFFSET))	// 1 - 12 sind wegen "Persönlich" 3 verschoben		return(entry-LANG_OFFSET);	else		if(entry>(13+LANG_OFFSET))			return(entry-LANG_OFFSET+3);		// 14 - 16 sind gleich, da Israel und		else					// Japan fehlen			return(15);			// Menü 16 = Australia wird 15}////	Berechnet einen Date-String nach den aktuellen Spracheinstellungen//void	GetDateString(Str255 s, unsigned long date, DateForm display){	Handle			intlParam=nil;	if(date!=-1)							// ist bei uns ungültig	{		intlParam=MyGetIntl(display);		if(intlParam)						// intl vorhanden?		{			HNoPurge(intlParam);			IUDatePString(date,display,s,intlParam);	// Dann danach formatieren			HPurge(intlParam);		}		else			IUDateString(date,display,s);	// Sonst Sprache des aktuellen OS nehmen	}else		s[0]=0;								// Sonst Leerstring zurück}////	Berechnet einen Time-String nach den aktuellen Spracheinstellungen//void	GetTimeString(Str255 s, unsigned long date){	Handle			intlParam=nil;	intlParam=MyGetIntl(shortDate);	if(intlParam)							// intl vorhanden?	{		HNoPurge(intlParam);				// Dann danach formatieren		IUTimePString(date,false,s,intlParam);	// FALSE: Keine Sekunden, bitte!		HPurge(intlParam);	}	else		IUTimeString(date,FALSE,s);		// Sonst Sprache des aktuellen OS nehmen}////	Holt eine itl0- oder itl1-Resource entsprechend den Menü-Einstellungen//Handle	MyGetIntl(DateForm display){	Handle		intlParam=nil;		if(display==shortDate)	{		switch(gS.language)		{		case LANG_SHARP:			intlParam=GetResource('itl0',SHARP_DATUM);	// Int0-Resource für Sharp-Format			break;					case LANG_OS:			intlParam=nil;								// Betriebssystem erwünscht			break;					case LANG_PERS:			intlParam=GetResource('itl0',PERSOENLICH);	// Int0-Resource für Sharp-Format			break;					default:			if(gS.language>=LANG_OFFSET)			// Gibt es die aktuelle Sprache				intlParam=GetResource('itl0',MenuToLanguageCode(gS.language));	// Int1-Resource für eingest. Sprache		}	}else		if(gS.language>=LANG_OFFSET)			// Gibt es die aktuelle Sprache			intlParam=GetResource('itl1',MenuToLanguageCode(gS.language));	// Int1-Resource für eingest. Sprache		else			intlParam=IUGetIntl(1);	return(intlParam);}